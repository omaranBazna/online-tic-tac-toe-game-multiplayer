<html>
<head>
<link href="style.css" rel="stylesheet" />
<title>Tic Tac Toe</title>

<style>
h1{
    font-family:Arial;
    text-align:center;
  
}
.board{
display:flex;
flex-direction: column;
align-items:center;
justify-content: center;
}
.board .row{
    display:flex;
    align-items: center;
    justify-content: center;
}
.cell{
height:100px;
width:100px;
border:1px solid black;
margin:5px;
}


</style>
</head>

<body>
<header>
  <h1>Tic Tac Toe</h1>
</header>
<main>
  <div class="board">
    <div class="row">
      <div class="cell" data-cor="0-0"></div>
      <div class="cell" data-cor="0-1"></div>
      <div class="cell" data-cor="0-2"></div>
    </div>
    <div class="row">
      <div class="cell" data-cor="1-0"></div>
      <div class="cell" data-cor="1-1"></div>
      <div class="cell" data-cor="1-2"></div>
    </div>
    <div class="row">
      <div class="cell" data-cor="2-0"></div>
      <div class="cell" data-cor="2-1"></div>
      <div class="cell" data-cor="2-2"></div>
    </div>
  </div>
  <div class="Player"></div>
  <div class="error" ></div>
</main>
<footer>

</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.js" integrity="sha512-nO7wgHUoWPYGCNriyGzcFwPSF+bPDOR+NvtOYy2wMcWkrnCNPKBcFEkU80XIN14UVja0Gdnff9EmydyLlOL7mQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script >
let player;
let room_id;
fetch("/getdata")
  .then((res) => res.json())
  .then(({ player, room_id }) => {
    if (player == "x") {
      $(".player").html("X");
      player = "x";
    } else {
      $(".player").html("O");
      player = "o";
    }
    room_id = room_id;
  });

$(".cell").click(function () {
  const el = $(this);
  const [x, y] = $(this).attr("data-cor").split("-");
  fetch("/move", {
    method: "post",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify({ x, y, player, id: room_id }),
  })
    .then((res) => {
      return res.json();
    })
    .then(({ err, msg }) => {
      if (err) {
        $(".error").html(msg);
      } else {
        el.css("background-color", player == "x" ? "green" : "red");
      }
    });
});


</script>
</body>

</html>